(()=>{"use strict";var e,r=function(e,r,t){if(t||2===arguments.length)for(var n,o=0,a=r.length;o<a;o++)!n&&o in r||(n||(n=Array.prototype.slice.call(r,0,o)),n[o]=r[o]);return e.concat(n||Array.prototype.slice.call(r))};function t(e,t,n,o,a){var i=e.getUniformLocation(t,n);if(a)o.length>1?e["uniform".concat(a)].apply(e,r([i],o,!1)):e["uniform".concat(a)](i,o[0]);else if(o.length>1){var c=o.length;c<=4&&c>0&&e["uniform".concat(c,"f")].apply(e,r([i],o,!1))}else e.uniform1f(i,o[0])}function n(e,r,t,n){void 0===n&&(n="position");var o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW);var a=e.getAttribLocation(r,n);return e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(a),o}!function(e){e["1f"]="1f",e["1i"]="1i",e["2f"]="2f",e["2i"]="2i",e["3f"]="3f",e["3i"]="3i",e["4f"]="4f",e["4i"]="4i"}(e||(e={}));var o={strokeStyle:"#6f42c1",lineWith:2},a=function(){function e(e,r){this.x=e,this.y=r}return e.prototype.cross=function(e){return this.x*e.y-this.y*e.x},Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},enumerable:!1,configurable:!0}),e}(),i=document.createElement("canvas"),c=document.createElement("canvas");i.width=500,i.height=500,c.width=500,c.height=500,document.body.appendChild(c),document.body.appendChild(i);var l=i.getContext("2d"),f=c.getContext("webgl");(function(r){var o=function(e,r,t){var n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,"attribute vec2 a_vertexPostition;\r\n\r\nattribute vec2 uv;\r\n\r\nvarying vec2 vUv;\r\n\r\n\r\nvoid main(){\r\n    gl_PointSize = 1.0;\r\n    vUv = uv;\r\n    gl_Position = vec4(a_vertexPostition, 1, 1);\r\n}"),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(n));var o=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(o,"precision mediump float;\r\nprecision highp int;\r\nvarying vec2 vUv;\r\n\r\nuniform vec2 center;\r\nuniform float scale;\r\nuniform int iterations;\r\n\r\nvec2 f(vec2 z,vec2 c){\r\n    return mat2(z,-z.y,z.x)*z+c;\r\n}\r\n\r\nvoid main(){\r\n    vec2 uv=vUv;\r\n    vec2 c=center+4.*(uv-vec2(.5))/scale;\r\n    vec2 z=vec2(0.);\r\n    bool escaped=false;\r\n    int j;\r\n    for(int i=0;i<65536;i++){\r\n        if(i>iterations)break;\r\n        j=i;\r\n        z=f(z,c);\r\n        if(length(z)>2.){\r\n            escaped=true;\r\n            break;\r\n        }\r\n    }\r\n    // gl_FragColor.rgb=escaped?vec3(float(j))/float(iterations):vec3(0.);\r\n    gl_FragColor.rgb=escaped?(vec3(float(j))/float(iterations)):vec3(0.0, 0.0, 0.0);\r\n    gl_FragColor.a=1.;\r\n}"),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(o));var a=e.createProgram();return e.attachShader(a,n),e.attachShader(a,o),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||console.log(e.getProgramInfoLog(a)),e.useProgram(a),a}(r);n(r,o,new Float32Array([-1,-1,-1,1,1,1,1,-1]),"a_vertexPostition"),n(r,o,new Float32Array([0,0,0,1,1,1,1,0]),"uv"),t(r,o,"center",[0,0]),t(r,o,"scale",[1]),t(r,o,"iterations",[256],e["1i"]);var a=function(e,r){var t=e.createBuffer();return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW),r.length}(r,new Int16Array([0,1,2,2,0,3]));r.drawElements(r.TRIANGLES,a,r.UNSIGNED_SHORT,0)})(f),function(e,r,t,n){!function(e,r,t,n){void 0===n&&(n=o);var a=n.strokeStyle,i=n.lineWith;e.arc(r[0],r[1],i,0,2*Math.PI),e.fill(),e.arc(t[0],t[1],i,0,2*Math.PI),e.fill(),e.fillText("(".concat(t.toString(),")"),t[0],t[1]+10),e.fillText("(".concat(r.toString(),")"),r[0],r[1]+10),e.beginPath(),e.strokeStyle=a,e.lineWidth=i,e.moveTo(r[0],r[1]),e.lineTo(t[0],t[1]),e.stroke()}(e,r,t),function(e,r,t){void 0===t&&(t="P"),e.beginPath(),e.arc(r[0],r[1],2,0,2*Math.PI),e.fill(),e.fillText("".concat(t,"   ").concat(r.toString()),r[0],r[1]-10)}(e,n);var i=new a(t[0]-r[0],t[1]-r[1]),c=new a(n[0]-r[0],n[1]-r[1]);e.fillText("distance: ".concat(Math.abs(i.cross(c)/i.length)),400,400),e.moveTo(50,50),e.bezierCurveTo(70,70,70,70,43,63),e.stroke()}(l,[50,200],[200,50],[50,50])})();
//# sourceMappingURL=main.js.map